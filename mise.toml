[tools]
python = "3.11"
uv = "latest"

[tasks.setup]
description = "Install and lock dependencies with UV"
run = "uv sync"

[tasks.bronze]
description = "Run bronze ingest (writes to DB)"
run = "uv run python run_pipeline.py --stage bronze"

[tasks.bronze_dry_run]
description = "Run bronze ingest validation without DB writes"
run = "uv run python run_pipeline.py --stage bronze --dry-run"

[tasks.silver]
description = "Run silver transform scaffold"
run = "uv run python run_pipeline.py --stage silver"

[tasks.gold]
description = "Run gold publish scaffold"
run = "uv run python run_pipeline.py --stage gold"

[tasks.pipeline]
description = "Run medallion pipeline scaffold"
run = "uv run python run_pipeline.py"

[tasks.visualize]
description = "Generate interactive HTML graph from exported CSVs"
run = "uv run python run_pipeline.py --stage visualize"
